<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>升级版轮播图</title>
</head>
<style>
    .container{
        width: 500px;
        margin: 0 auto;
    }
    .img{
        width: 500px;
        /*display: none;*/
    }
    .active{
        width: 500px;
        display: block;
    }
    .btn1{
        position: relative;
        left: 360px;
        top: -45px;
        cursor: pointer;
    }
    .btn2{
        position: relative;
        left: 365px;
        top: -45px;
        cursor: pointer;
    }
    .ul1{
        position: relative;
        display: flex;
        flex-direction: row;
        top: -63px;
        width: 150px;
        margin: 0;
        /*left: -20px;*/
    }
    .ul1 .lii{
        list-style: none;
        width: 30px;
        cursor: pointer;
        border-radius: 50%;
    }
    .ul1 .lii:hover {
        color: white;
        text-decoration:underline;
    }
    .ul1 .active{
        color: white;
        text-decoration:underline;
    }
    .imgs{
        /*width: 500px;*/
        display: flex;
        flex-direction: row;
        position: absolute;

    }
    .dimg{
        width: 500px;
        position: relative;
        height: 317.5px;
        overflow: hidden;
    }
</style>
<body>
<div class="container">
    <div class="dimg">
        <div class="imgs">
            <div><img class="img" src="../img/111.jpg"></div>
            <div><img class="img" src="../img/222.jpg"></div>
            <div><img class="img" src="../img/333.jpg"></div>
            <div><img class="img" src="../img/444.jpg"></div>
            <div><img class="img" src="../img/111.jpg"></div>
        </div>
    </div>
        <input type="button" value="上一张" class="btn1" onclick="cbtn1()">
        <input type="button" value="下一张" class="btn2" onclick="cbtn2()">
        <ul class="ul1">
            <li class="lii active">1</li>
            <li class="lii">2</li>
            <li class="lii">3</li>
            <li class="lii">4</li>
        </ul>

</div>

<script>
    var Img = document.getElementsByClassName("img");
    var Imgs = document.getElementsByClassName("imgs")[0];
    var Lis = document.getElementsByClassName("lii");

    var timer;
    var timer2;
    var i = 0; // 记录imgs相对于最初位置的向左偏移量
    var j = 0; // 为循环设立
    var k = 0; // 记录此时为第几个图片

    var animat = function () {
        timer = setInterval(function () {
            timer2 = setInterval(function () {
                Imgs.style.left = Imgs.offsetLeft - 1 + "px";
                i += 1;
                if (i % 500 == 0) {
                    for (j = 0; j < Lis.length; j++) {
                        Lis[j].className = "lii";
                    }
                    k = parseInt(i / 500);
                    Lis[k].className = "lii active";
                    clearInterval(timer2);
                }
                if (Imgs.offsetLeft == (-1990) || Imgs.offsetLeft < (-1990)) {
                    i = 0;
                    Lis[k].className = "lii";
                    Lis[0].className = "lii active";
                    Imgs.style.left = 0 + "px";
                    clearInterval(timer2);
                }
            }, 1)
        }, 3000)
    }

    // animat();
    //
    // cbtn1 = function () {
    //     console.log(i, k);
    //     clearInterval(timer);
    //     clearInterval(timer2);
    //
    //     k = (k + 5 - 1) % 5;
    //     i = (i - 500 + 1990) % 1990;
    //
    //     console.log(i, k);
    //
    //     animat();
    //
    //     clearInterval(timer);
    //     clearInterval(timer2);
    // }






</script>
</body>
</html>